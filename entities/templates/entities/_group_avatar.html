{% load thumbnail content %}

{% kwacro avatar %}
    {% if group.avatar %}
        <div title="{{ group.name }}" class="avatar avatar-size-{{ size|default:"64" }}-{{ size|default:"64" }}">
            {% thumbnail group.avatar '64x64' format='PNG' crop="center" as avatar %}
                <img src="{{ avatar.url }}" alt="{{ group.name }}">
            {% endthumbnail %}
        </div>
    {% else %}
        <div title="{{ group.name }}" class="avatar  avatar-size-{{ size|default:"64" }}-{{ size|default:"64" }} avatar-initials" data-initials="{{ group.get_initials|length }}" style="background-color: {{ group.avatar_color }}">
            {{ group.get_initials|truncatechars:4 }}
        </div>
    {% endif %}
{% endkwacro %}

{% if link %}
    <a class="avatar-wrap group-avatar" href="{{ group.get_absolute_url }}">
        {% usekwacro avatar %}
    </a>
{% else %}
    <div class="avatar-wrap group-avatar">
        {% usekwacro avatar %}
    </div>
{% endif %}
