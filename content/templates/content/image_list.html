{% extends 'stadt/list.html' %}
{% load rules thumbnail %}
{% load rules %}

{% block heading_title %}
    <h1 class="content-classification">Bilder</h1>
{% endblock %}

{% block heading_toolbar %}
    <a href="{{ content.get_absolute_url }}" class="btn btn-default pull-right">Beitrag</a>
{% endblock %}

{% block list %}
    <div class="gallery-container" data-component="gallery">
        <input type="hidden" name="content_id" value="{{ content.id }}" />
        <header class="gallery-header">
            <div class="gallery-header-description">
                Artikelbilder für {{ content.title }}
            </div>
            {% has_perm 'content.create_image' user content as can_create_image %}
            {% if can_create_image %}
                <div class="btn-toolbar gallery-header-actions">
                    <a href="{% url 'image-create' content.pk %}" class="btn btn-default btn-sm" data-purpose="gallery-add">
                        Bild hinzufügen
                    </a>
                </div>
            {% endif %}
        </header>

        <ul class="gallery">
            {% for image in image_list %}
                {% thumbnail image.file '250' format='PNG' as thumb %}
                    <li style="width: {{ thumb.width }}px; height: {{ thumb.height }}px">
                        <a href="{{ image.file.url }}" class="gallery-link">
                            <img src="{{ thumb.url }}" class="gallery-image-preview">
                        </a>
                    </li>
                {% endthumbnail %}
            {% endfor %}
        </ul>
    </div>
{% endblock %}
